<div class="transactions-container fade-in">
    <div class="header-actions">
        <h2>Transactions</h2>
        <button class="btn btn-primary" (click)="toggleForm()">
            <span class="icon">{{ showForm ? '‚úï' : '+' }}</span>
            {{ showForm ? 'Cancel' : 'Add Transaction' }}
        </button>
    </div>

    <!-- Add Transaction Form -->
    <div class="card form-card" *ngIf="showForm">
        <h3>New Transaction</h3>
        <form [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
            <div class="form-row">
                <div class="form-group">
                    <label>Type</label>
                    <div class="type-selector">
                        <label class="radio-label" [class.active]="transactionForm.get('type')?.value === 'expense'">
                            <input type="radio" formControlName="type" value="expense"> Expense
                        </label>
                        <label class="radio-label" [class.active]="transactionForm.get('type')?.value === 'income'">
                            <input type="radio" formControlName="type" value="income"> Income
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="amount">Amount</label>
                    <input id="amount" type="number" formControlName="amount" placeholder="0.00">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" formControlName="category">
                        <option value="" disabled>Select Category</option>
                        <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="date">Date</label>
                    <input id="date" type="date" formControlName="date">
                </div>
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <input id="description" type="text" formControlName="description" placeholder="What was this for?">
            </div>

            <button type="submit" class="btn btn-primary w-100" [disabled]="transactionForm.invalid || isLoading">
                {{ isLoading ? 'Saving...' : 'Save Transaction' }}
            </button>
        </form>
    </div>

    <!-- Transactions List -->
    <div class="card list-card">
        <div class="transaction-list" *ngIf="!isLoading; else loading">
            <div *ngIf="transactions.length === 0" class="empty-state">
                <p>No transactions found. Add one to get started!</p>
            </div>

            <div *ngFor="let t of transactions" class="transaction-item">
                <div class="t-left">
                    <div class="t-icon" [class.income]="t.type === 'income'" [class.expense]="t.type === 'expense'">
                        {{ t.type === 'income' ? '‚Üì' : '‚Üë' }}
                    </div>
                    <div class="t-info">
                        <span class="t-desc">{{ t.description }}</span>
                        <span class="t-meta">{{ t.category }} ‚Ä¢ {{ t.date | date }}</span>
                    </div>
                </div>
                <div class="t-right">
                    <span class="t-amount" [class.positive]="t.type === 'income'">
                        {{ t.type === 'income' ? '+' : '-' }}{{ t.amount | currency }}
                    </span>
                    <button class="btn-icon delete-btn" (click)="deleteTransaction(t.id)">üóëÔ∏è</button>
                </div>
            </div>
        </div>

        <ng-template #loading>
            <div class="loading-state">
                <p>Loading transactions...</p>
            </div>
        </ng-template>
    </div>
</div>